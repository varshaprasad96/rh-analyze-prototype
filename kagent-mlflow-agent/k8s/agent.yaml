# kagent Agent (A2A) that is discoverable in Kagenti UI
apiVersion: kagent.dev/v1alpha2
kind: Agent
metadata:
  name: kagent-mlflow-agent
  namespace: mschimun
  labels:
    app: kagent-mlflow-agent
    kagenti.io/type: agent
    kagenti.io/protocol: a2a
    kagenti.io/framework: kagent
spec:
  description: "A2A agent via kagent; server-side MLflow tracking; Llama Stack vector store retrieval; vLLM model; GitHub MCP tools"
  type: Declarative
  declarative:
    modelConfig: kagent-mlflow-agent-model
    # Keep non-stream for OpenAI compatibility without implementing streaming here.
    # A2A streaming is handled by kagent runtime.
    stream: false
    systemMessage: |
      You are a helpful AI assistant with access to:
      - A documentation knowledge base via RAG (retrieval-augmented generation)
      - GitHub repositories via MCP tools
      
      When answering questions:
      - Use the retrieved context when it is relevant
      - Use GitHub tools to explore repositories, commits, releases, and code
      - Answer clearly and concisely
      
      Available GitHub tools:
      - get_file_contents: Get contents of a file from a repository
      - list_commits: List commits in a repository
      - list_branches: List branches in a repository
      - search_code: Search for code across repositories
      - search_repositories: Search for repositories
      - get_commit: Get details of a specific commit
      - list_releases: List releases for a repository
      - get_latest_release: Get the latest release
    a2aConfig:
      skills:
        - id: answer
          name: answer
          description: Answer user questions using retrieval and GitHub tools when helpful.
          tags:
            - qa
            - rag
            - mlflow
            - github
    # GitHub MCP Tools
    tools:
      - type: McpServer
        mcpServer:
          apiGroup: kagent.dev
          kind: RemoteMCPServer
          name: github-mcp
          toolNames:
            - get_commit
            - get_file_contents
            - get_latest_release
            - get_release_by_tag
            - get_tag
            - list_branches
            - list_commits
            - list_releases
            - list_tags
            - search_code
            - search_repositories


